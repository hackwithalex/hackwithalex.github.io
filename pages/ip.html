<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>IP Lookup Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0f172a;
      color: #f8fafc;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1rem;
      min-height: 100vh;
    }
    h1 { 
      color: #38bdf8; 
      text-align: center;
      font-size: 1.8rem;
      margin-bottom: 1rem;
    }
    .box {
      background: #1e293b;
      padding: 1rem;
      border-radius: 12px;
      width: 100%;
      max-width: 600px;
      box-shadow: 0 0 12px rgba(0,0,0,0.5);
    }
    .input-row {
      display: flex;
      flex-wrap: wrap;
      gap: .5rem;
    }
    input {
      flex: 1 1 auto;
      padding: .7rem;
      border-radius: 6px;
      border: none;
      font-size: 1rem;
      min-width: 0;
    }
    button {
      padding: .7rem 1.2rem;
      border: none;
      border-radius: 6px;
      background: #38bdf8;
      color: #0f172a;
      font-weight: bold;
      cursor: pointer;
      flex-shrink: 0;
    }
    .results {
      margin-top: 1rem;
      line-height: 1.6;
      font-size: .95rem;
      word-break: break-word;
    }
    .badges span {
      display: inline-block;
      padding: .3rem .7rem;
      border-radius: 999px;
      margin: .2rem .3rem 0 0;
      font-size: .8rem;
      font-weight: 600;
    }
    .bad--red { background:#fee2e2; color:#991b1b; }
    .bad--orange { background:#ffedd5; color:#9a3412; }
    .bad--blue { background:#dbeafe; color:#1e3a8a; }
    .bad--green { background:#dcfce7; color:#166534; }
    .map {
      margin-top:1rem;
      width:100%;
      height:250px;
      border-radius:12px;
      overflow:hidden;
    }
    .error {
      margin-top:1rem;
      padding: .8rem;
      border-radius: 8px;
      background: #fee2e2;
      color: #991b1b;
      font-weight: bold;
    }
    @media (min-width: 768px) {
      h1 { font-size: 2rem; }
      .map { height: 350px; }
    }
  </style>
</head>
<body>
  <h1>üîç IP Lookup</h1>
  <div class="box">
    <div class="input-row">
      <input id="ipInput" placeholder="Enter IP or leave blank for your IP">
      <button onclick="lookupIP()">Lookup</button>
    </div>
    <div id="results" class="results"></div>
    <div id="map" class="map"></div>
    <div id="error" class="error" style="display:none;"></div>
  </div>

  <script>
    function badge(txt, cls){ return `<span class="${cls}">${txt}</span>`; }

    async function lookupIP() {
      const ip = document.getElementById("ipInput").value.trim();
      const results = document.getElementById("results");
      const map = document.getElementById("map");
      const errorBox = document.getElementById("error");

      results.innerHTML = "";
      map.innerHTML = "";
      errorBox.style.display = "none";

      const url = `http://ip-api.com/json/${ip || ''}?fields=status,message,query,isp,org,as,country,regionName,city,zip,lat,lon,timezone,proxy,hosting,mobile`;

      try {
        const res = await fetch(url);
        const data = await res.json();

        if (data.status !== "success") {
          errorBox.style.display = "block";
          errorBox.innerText = "Error: " + (data.message || "Lookup failed.");
          return;
        }

        let badges = "";
        if (data.proxy)   badges += badge("VPN/Proxy","bad--red");
        if (data.hosting) badges += badge("Hosting/DC","bad--orange");
        if (data.mobile)  badges += badge("Mobile","bad--blue");
        if (!data.proxy && !data.hosting) badges += badge("Residential","bad--green");

        results.innerHTML = `
          <strong>IP:</strong> ${data.query}<br>
          <strong>ISP:</strong> ${data.isp}<br>
          <strong>Org:</strong> ${data.org}<br>
          <strong>ASN:</strong> ${data.as}<br>
          <strong>Country:</strong> ${data.country}<br>
          <strong>Region:</strong> ${data.regionName}<br>
          <strong>City:</strong> ${data.city} (${data.zip})<br>
          <strong>Timezone:</strong> ${data.timezone}<br>
          <div class="badges">${badges}</div>
        `;

        map.innerHTML = `
          <iframe width="100%" height="100%" style="border:0"
            loading="lazy" allowfullscreen
            src="https://maps.google.com/maps?q=${data.lat},${data.lon}&z=10&output=embed">
          </iframe>`;
      } catch (err) {
        errorBox.style.display = "block";
        errorBox.innerText = "Network Error: Unable to fetch data.";
      }
    }
  </script>
</body>
</html>
